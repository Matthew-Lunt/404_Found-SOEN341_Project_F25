<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard | 404TicketsFound</title>
    <link rel="stylesheet" href="css/homepage.css">
</head>

<body>
    <header>
        <div class="container header-content">
            <h1 class="logo">404TicketsFound</h1>
            <nav>
                <a href="index.html">Home</a>
                <a href="#">Reports</a>
                <a href="#" class="btn-secondary">Logout</a>
            </nav>
        </div>
    </header>

    <section class="container section">
        <h2 class="section-title">Admin Dashboard</h2>

        <div class="card" style="text-align:left;">
            <h3>Manage Organizations</h3>
            <form id="addOrgForm" class="form" style="margin-top:15px;">
                <input type="text" id="orgName" placeholder="Organization Name" required />
                <select id="orgRole">
                    <option value="Organizer">Organizer</option>
                    <option value="Student">Student</option>
                    <option value="Admin">Admin</option>
                </select>
                <button type="submit" class="btn-primary">Add Organization</button>
            </form>
        </div>

        <div class="card" style="margin-top:30px; text-align:left;">
            <h3>Organization List</h3>
            <table id="orgTable" style="width:100%; margin-top:15px; border-collapse:collapse;">
                <thead>
                    <tr style="background:#7699D4; color:white;">
                        <th style="padding:10px;">Organization Name</th>
                        <th style="padding:10px;">Assigned Role</th>
                        <th style="padding:10px;">Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 404TicketsFound. All rights reserved.</p>
    </footer>

    <script>
        const form = document.getElementById('addOrgForm');
        const orgTableBody = document.querySelector('#orgTable tbody');

        // Temporary in-memory data
        const organizations = [
            { name: 'CS Student Association', role: 'Organizer' },
            { name: 'Engineering Society', role: 'Admin' },
        ];

        function renderTable() {
            orgTableBody.innerHTML = '';

            if (organizations.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                <td colspan="3" style="padding:15px; text-align:center; font-style:italic; color:#555;">
                    No organizations added yet.
                </td>
            `;
                orgTableBody.appendChild(row);
                return;
            }

            organizations.forEach((org, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                <td style="padding:10px;">${org.name}</td>
                <td style="padding:10px;">
                    <select data-index="${index}" class="role-select">
                        <option value="Organizer" ${org.role === 'Organizer' ? 'selected' : ''}>Organizer</option>
                        <option value="Student" ${org.role === 'Student' ? 'selected' : ''}>Student</option>
                        <option value="Admin" ${org.role === 'Admin' ? 'selected' : ''}>Admin</option>
                    </select>
                </td>
                <td style="padding:10px;">
                    <button class="btn-secondary delete-btn" data-index="${index}">Delete</button>
                </td>
            `;
                orgTableBody.appendChild(row);
            });
        }

        // Add organization
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('orgName').value.trim();
            const role = document.getElementById('orgRole').value;
            if (name) {
                organizations.push({ name, role });
                document.getElementById('orgName').value = '';
                renderTable();
            }
        });

        // Handle delete
        orgTableBody.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-btn')) {
                const index = e.target.dataset.index;
                organizations.splice(index, 1);
                renderTable();
            }
        });

        // Handle role change
        orgTableBody.addEventListener('change', (e) => {
            if (e.target.classList.contains('role-select')) {
                const index = e.target.dataset.index;
                organizations[index].role = e.target.value;
            }
        });

        renderTable();
    </script>

</body>

</html>
