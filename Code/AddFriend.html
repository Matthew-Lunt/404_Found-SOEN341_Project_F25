<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Find Friends — 404TicketsFound</title>
  <link rel="stylesheet" href="css/homepage.css">
  <script src="JS/nav.js" defer></script>
</head>
<body>
<header>
  <div class="container header-content">
    <h1 class="logo"><a href="index.html">404TicketsFound </a></h1>
    <nav>   
        <a href="SearchResults.html">Search</a>
        <a href="AddFriend.html"> Add Friend </a> 
        
      </nav>
  </div>
</header>

  <main class="content" style="display: flex; flex-direction: column; min-height: 100vh;">
    <!-- Top div: Find Friend -->
    <section class="container section" id="find-friend">
      <h2 class="section-title">Find Friend</h2>
      <div class="friend-search" style="display:flex;gap:8px;align-items:center;">
        <label for="friendQuery" class="visually-hidden">Search friends</label>
        <input id="friendQuery" type="search" placeholder="Search by name or event..." style="flex:1;padding:8px;border-radius:8px;border:1px solid #ccc;">
        <button id="friendSearchBtn" class="btn-primary">Search</button>
      </div>
    </section>

    <!-- Bottom div: Suggested Friends -->
    <section class="container section suggested-block" id="suggested-block">
      <h3 class="section-title">Suggested Friends</h3>
      <div id="suggestedFriends" class="suggested-list" aria-live="polite"></div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 404TicketsFound. All rights reserved.</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const suggestedBlock = document.querySelector('.suggested-block');
      if (!suggestedBlock) return;

      const templates = [
        { name: 'Alex Morgan', event: 'Summer Concert — 2024' },
        { name: 'Jamie Lee', event: 'City Marathon — 2023' },
        { name: 'Sam Patel', event: 'Hockey Night — 2024' },
        { name: 'Taylor Quinn', event: 'Tech Conference — 2022' },
        { name: 'Riley Chen', event: 'Indie Festival — 2024' },
        { name: 'Jordan Blake', event: 'Charity Gala — 2023' }
      ];

      const out = document.getElementById('suggestedFriends');
      const queryEl = document.getElementById('friendQuery');
      const btn = document.getElementById('friendSearchBtn');

      function makeCard(item) {
        const card = document.createElement('div');
        card.className = 'card friend-card';
        card.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
            <div>
              <strong>${item.name}</strong>
              <div style="color:#666;font-size:0.95rem;margin-top:4px;">Last event: ${item.event}</div>
            </div>
            <div style="display:flex;gap:8px;">
              <button class="btn-primary btn-add">Add</button>
              <button class="btn-secondary btn-view">View</button>
            </div>
          </div>
        `;
        card.querySelector('.btn-add').addEventListener('click', () => {
          alert('Friend request sent to ' + item.name);
        });
        card.querySelector('.btn-view').addEventListener('click', () => {
          alert(item.name + ' — past event: ' + item.event);
        });
        return card;
      }

      function render(list) {
        out.innerHTML = '';
        if (!list.length) {
          out.innerHTML = '<p class="muted">No suggested friends.</p>';
          return;
        }
        list.forEach(i => out.appendChild(makeCard(i)));
      }

      function filter(q) {
        if (!q) return templates.slice();
        q = q.toLowerCase();
        return templates.filter(t => t.name.toLowerCase().includes(q) || t.event.toLowerCase().includes(q));
      }

      render(templates);

      btn?.addEventListener('click', () => render(filter(queryEl.value.trim())));
      queryEl?.addEventListener('input', (e) => render(filter(e.target.value.trim())));
      queryEl?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') { e.preventDefault(); render(filter(queryEl.value.trim())); }
      });
    });
  </script>
</body>
</html>
